!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).webPerformance=e()}(this,function(){"use strict";return{headers:null,paintData:{},getPaint:!1,getNav:!1,url:"",setHeaders:function(t){this.headers=t},setUrl:function(t){this.url=t},init:function(t){var e=this;if(this.url=t,window.PerformanceObserver){var n=new window.PerformanceObserver(function(t){t.getEntries().forEach(function(t){"paint"===t.entryType?(e.paintData[t.name]=parseInt(t.startTime),e.getPaint=!0):"navigation"===t.entryType&&(e.handleData(t),e.getNav=!0)}),e.getPaint&&e.getNav&&(e.paintData["first-paint"]||window.performance&&window.performance.getEntries().forEach(function(t){"first-paint"===t.name&&(e.paintData["first-paint"]=parseInt(t.startTime)),"first-contentful-paint"===t.name&&(e.paintData["first-contentful-paint"]=parseInt(t.startTime))}),e.paintData.timestamp=(new Date).getTime(),e.sendData(e.paintData))});try{n.observe({entryTypes:["navigation","paint"]})}catch(t){console.error(t)}}},handleData:function(t){try{this.paintData.dns=t.domainLookupEnd?parseInt(t.domainLookupEnd-t.domainLookupStart):null,this.paintData.fetchStart=t.fetchStart?t.fetchStart:null,this.paintData.connectStart=t.connectStart?parseInt(t.connectStart-t.fetchStart):null,this.paintData.connectEnd=t.connectEnd?parseInt(t.connectEnd-t.fetchStart):null,this.paintData.requestStart=t.requestStart?parseInt(t.requestStart-t.fetchStart):null,this.paintData.responseStart=t.responseStart?parseInt(t.responseStart-t.fetchStart):null,this.paintData.responseEnd=t.responseEnd?parseInt(t.responseEnd-t.fetchStart):null,this.paintData.dom=t.domComplete?parseInt(t.domComplete-t.fetchStart):null,this.paintData.interactive=t.domInteractive?parseInt(t.domInteractive-t.fetchStart):null,this.paintData.domready=t.domContentLoadedEventEnd?parseInt(t.domContentLoadedEventEnd-t.fetchStart):null,this.paintData.onload=t.loadEventEnd?parseInt(t.loadEventEnd-t.fetchStart):null}catch(t){console.error(t)}},sendData:function(t){try{var e=JSON.stringify(t);!function(t,e,n,a){var r=this,i=new XMLHttpRequest;if(i.open("POST",t,!0),i.setRequestHeader("content-Type","application/json"),e)for(var o in e)e[o]&&i.setRequestHeader(o,e[o]);i.onreadystatechange=function(){4===i.readyState&&200===i.status&&a&&a.call(r,i.responseText)},i.send(n)}(this.url,this.headers,e)}catch(t){console.error(t)}}}});
